<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlayTV - Shiko TV Online Falas</title>
    
    <!-- CSS -->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white; 
            min-height: 100vh;
            padding: 20px;
        }
        
        /* Header */
        .header {
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #00d4ff;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }
        
        .logo {
            font-size: 36px;
            font-weight: bold;
            color: #00d4ff;
            text-align: center;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        /* Menu */
        .categories {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .category-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .category-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            transform: translateY(-3px);
        }
        
        .category-btn.active {
            background: #00d4ff;
            color: #000;
            border-color: #00d4ff;
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }
        
        /* Channels Grid */
        .channels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .channel-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .channel-card:hover {
            transform: translateY(-8px);
            border-color: #00d4ff;
            box-shadow: 0 15px 35px rgba(0, 212, 255, 0.25);
            background: rgba(255, 255, 255, 0.12);
        }
        
        .channel-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #00d4ff, #0099ff);
        }
        
        .channel-icon {
            font-size: 50px;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .channel-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
            text-align: center;
        }
        
        .channel-category {
            display: inline-block;
            background: linear-gradient(45deg, #00d4ff, #0099ff);
            color: #000;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            width: 100%;
        }
        
        .play-btn {
            width: 100%;
            background: linear-gradient(45deg, #00d4ff, #0099ff);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .play-btn:hover {
            background: linear-gradient(45deg, #0099ff, #0066ff);
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 212, 255, 0.4);
        }
        
        /* Loading Animation */
        .loading {
            text-align: center;
            padding: 50px;
            grid-column: 1/-1;
        }
        
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #00d4ff;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Streaming Instructions */
        .instructions {
            background: rgba(0, 0, 0, 0.8);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border-left: 5px solid #00d4ff;
        }
        
        .instructions h3 {
            color: #00d4ff;
            margin-bottom: 15px;
        }
        
        .instructions ol {
            padding-left: 20px;
            line-height: 1.8;
        }
        
        .instructions li {
            margin-bottom: 10px;
        }
        
        .stream-link {
            background: rgba(0, 212, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            margin: 15px 0;
            word-break: break-all;
            border: 1px dashed #00d4ff;
        }
        
        /* Test Button */
        .test-btn {
            background: linear-gradient(45deg, #ff4444, #ff8800);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
        }
        
        .test-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 68, 68, 0.3);
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 30px;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 50px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .channels-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 15px;
            }
            
            .category-btn {
                padding: 10px 20px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">
            <span style="font-size: 40px;">ğŸ“º</span>
            <span>PLAY TV</span>
            <span style="font-size: 40px;">ğŸ¬</span>
        </div>
        
        <div class="categories">
            <button class="category-btn active" data-category="all">ğŸŒ TÃ« Gjitha</button>
            <button class="category-btn" data-category="documentarios">ğŸ¬ DokumentarÃ«</button>
            <button class="category-btn" data-category="esportes">âš½ Sport</button>
            <button class="category-btn" data-category="filmesseries">ğŸ¥ Filma & Seri</button>
            <button class="category-btn" data-category="infantil">ğŸ§¸ FÃ«mijÃ«</button>
            <button class="category-btn" data-category="jornalismo">ğŸ“° Lajme</button>
            <button class="category-btn" data-category="musicas">ğŸµ MuzikÃ«</button>
        </div>
    </div>

    <!-- Instructions -->
    <div class="instructions">
        <h3>âš ï¸ IMPORTANTE: Si tÃ« Shikoni Stream-et</h3>
        <ol>
            <li><strong>Stream-et punojnÃ« VETÃ‹M nÃ« HTTP</strong> (jo nÃ« GitHub Pages HTTPS)</li>
            <li><strong>PÃ«r testim lokal:</strong>
                <div class="stream-link">
                    http://server.stream-one.fun:80/play/live.php?mac=00:1B:79:3F:21:AC&stream=3&extension=m3u8
                </div>
            </li>
            <li><strong>Testo njÃ« stream:</strong>
                <button class="test-btn" onclick="testStream(3)">ğŸ§ª Testo TOP CHANNEL</button>
                <button class="test-btn" onclick="testStream(1427113)">ğŸ§ª Testo BIG BROTHER</button>
            </li>
        </ol>
    </div>

    <!-- Channels Container -->
    <div class="channels-grid" id="channelsContainer">
        <div class="loading">
            <div class="spinner"></div>
            <h3>Po ngarkoj kanalet...</h3>
            <p>Kjo mund tÃ« zgjasÃ« disa sekonda</p>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <h3>ğŸ“º PlayTV - Version Lokal</h3>
        <p>Ky version punon 100% kur hostohet nÃ« HTTP lokal</p>
        <p><small>PÃ«r probleme me stream-et, kontrolloni qÃ« jeni nÃ« HTTP dhe jo HTTPS</small></p>
    </div>

    <!-- JavaScript -->
    <script>
        // ==================== LISTA E KANALEVE (DIRECT) ====================
        const channels = [
            {
                id: 1,
                title: "TOP CHANNEL HD",
                category: "filmesseries",
                icon: "â­",
                streamId: 3,
                description: "Kanal kryesor shqiptar"
            },
            {
                id: 2,
                title: "BIG BROTHER VIP 1",
                category: "documentarios",
                icon: "ğŸ”´",
                streamId: 1427113,
                description: "Reality show"
            },
            {
                id: 3,
                title: "KLAN TV HD",
                category: "filmesseries",
                icon: "ğŸ”µ",
                streamId: 11,
                description: "Informacion dhe argÃ«tim"
            },
            {
                id: 4,
                title: "RTSH 1 HD",
                category: "jornalismo",
                icon: "ğŸ›ï¸",
                streamId: 66,
                description: "Televizioni publik"
            },
            {
                id: 5,
                title: "ARTÄ€ NEWS HD",
                category: "jornalismo",
                icon: "ğŸ“°",
                streamId: 75,
                description: "Lajme 24 orÃ«"
            },
            {
                id: 6,
                title: "FILM GOLD HD",
                category: "filmesseries",
                icon: "ğŸ¬",
                streamId: 212425,
                description: "Film tÃ« rinj dhe klasikÃ«"
            },
            {
                id: 7,
                title: "BANG BANG",
                category: "infantil",
                icon: "ğŸ§¸",
                streamId: 193,
                description: "Kartoona pÃ«r fÃ«mijÃ«"
            },
            {
                id: 8,
                title: "DISCOVERY CHANNEL",
                category: "documentarios",
                icon: "ğŸ”¬",
                streamId: 227,
                description: "DokumentarÃ« shkencorÃ«"
            },
            {
                id: 9,
                title: "TRING ACTION",
                category: "filmesseries",
                icon: "ğŸ­",
                streamId: 106,
                description: "Filma aksion"
            },
            {
                id: 10,
                title: "RTK 1 HD",
                category: "jornalismo",
                icon: "ğŸ“¡",
                streamId: 27,
                description: "Televizioni publik i KosovÃ«s"
            }
        ];

        // ==================== FUNKSIONET KRYESORE ====================
        
        // 1. NGARKO KANALET
        function loadChannels() {
            console.log('ğŸ¬ Po ngarkoj kanalet...');
            
            let html = '';
            channels.forEach((channel, index) => {
                const categoryName = getCategoryName(channel.category);
                
                html += `
                    <div class="channel-card" data-category="${channel.category}">
                        <div class="channel-icon">${channel.icon}</div>
                        <h3 class="channel-title">${channel.title}</h3>
                        <div class="channel-category">${categoryName}</div>
                        <p style="text-align: center; color: rgba(255,255,255,0.7); margin: 10px 0;">
                            ${channel.description}
                        </p>
                        <button class="play-btn" onclick="playStream(${channel.streamId}, '${channel.title}')">
                            <span style="font-size: 20px;">â–¶</span> SHIKO LIVE
                        </button>
                    </div>
                `;
            });
            
            document.getElementById('channelsContainer').innerHTML = html;
            setupEventListeners();
            console.log('âœ… Kanalet u ngarkuan!');
        }

        // 2. LUJ STREAM
        function playStream(streamId, channelName) {
            console.log(`ğŸ¬ Duke u pÃ«rpjekur tÃ« luaj: ${channelName} (ID: ${streamId})`);
            
            // Krijo URL-nÃ« e stream-it
            const streamUrl = `http://server.stream-one.fun:80/play/live.php?mac=00:1B:79:3F:21:AC&stream=${streamId}&extension=m3u8`;
            
            // Testo nÃ«se Ã«shtÃ« HTTPS
            if (window.location.protocol === 'https:') {
                alert(`âŒ PROBLEM: Stream-et punojnÃ« vetÃ«m nÃ« HTTP!\n\nğŸ“Œ ZGJIDHJE:\n1. Shkarkoni kÃ«tÃ« faqe\n2. Hapeni nÃ« kompjuter\n3. Punon 100%!\n\nğŸ”— Stream URL: ${streamUrl}`);
                return;
            }
            
            // Krijo dritaren e re pÃ«r stream
            const windowFeatures = 'width=900,height=600,scrollbars=yes,resizable=yes';
            const newWindow = window.open('', `PlayTV - ${channelName}`, windowFeatures);
            
            if (!newWindow) {
                alert('âŒ Shfletuesi bllokoi hapjen e dritares. Lejoni popups pÃ«r kÃ«tÃ« faqe.');
                return;
            }
            
            // Krijo faqen e stream-it
            newWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>PlayTV - ${channelName}</title>
                    <style>
                        * { margin: 0; padding: 0; box-sizing: border-box; }
                        body { 
                            background: #000; 
                            color: white; 
                            font-family: Arial, sans-serif; 
                            padding: 20px;
                        }
                        .header {
                            background: #111;
                            padding: 15px;
                            border-radius: 10px;
                            margin-bottom: 20px;
                            border: 2px solid #00d4ff;
                            text-align: center;
                        }
                        video {
                            width: 100%;
                            max-height: 70vh;
                            border-radius: 10px;
                            background: #000;
                        }
                        .controls {
                            margin-top: 20px;
                            text-align: center;
                        }
                        button {
                            background: #00d4ff;
                            color: black;
                            border: none;
                            padding: 10px 20px;
                            border-radius: 5px;
                            cursor: pointer;
                            font-weight: bold;
                            margin: 0 10px;
                        }
                        .info {
                            background: rgba(255,255,255,0.1);
                            padding: 15px;
                            border-radius: 10px;
                            margin-top: 20px;
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>ğŸ“º ${channelName}</h1>
                        <p>Duke ngarkuar stream-in...</p>
                    </div>
                    
                    <div id="playerContainer">
                        <video id="videoPlayer" controls autoplay playsinline>
                            Shfletuesi juaj nuk mbÃ«shtet kÃ«tÃ« format video.
                        </video>
                    </div>
                    
                    <div class="controls">
                        <button onclick="window.location.reload()">ğŸ”„ Rifresko</button>
                        <button onclick="window.close()">âŒ Mbyll</button>
                    </div>
                    
                    <div class="info">
                        <p><strong>ğŸ“¡ URL e Stream-it:</strong><br>
                        <small>${streamUrl}</small></p>
                        <p><strong>ğŸ’¡ NÃ«se nuk funksionon:</strong><br>
                        Kopjo URL-nÃ« e sipÃ«rme nÃ« VLC Media Player</p>
                    </div>
                    
                    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
                    <script>
                        const streamUrl = "${streamUrl}";
                        const video = document.getElementById('videoPlayer');
                        
                        function playHLS() {
                            if (Hls.isSupported()) {
                                const hls = new Hls({
                                    enableWorker: true,
                                    lowLatencyMode: true
                                });
                                hls.loadSource(streamUrl);
                                hls.attachMedia(video);
                                hls.on(Hls.Events.MANIFEST_PARSED, () => {
                                    video.play();
                                    document.querySelector('.header p').textContent = 'âœ… Stream-i po luhet';
                                });
                                hls.on(Hls.Events.ERROR, (event, data) => {
                                    console.error('HLS Error:', data);
                                    if (data.fatal) {
                                        document.querySelector('.header p').innerHTML = 
                                            'âŒ Gabim nÃ« stream. Provoni:<br>' +
                                            '1. Kopjoni URL-nÃ« nÃ« VLC<br>' +
                                            '2. Kontrolloni internetin<br>' +
                                            '3. Provoni pÃ«rsÃ«ri mÃ« vonÃ«';
                                    }
                                });
                            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                                video.src = streamUrl;
                                video.addEventListener('loadedmetadata', () => {
                                    video.play();
                                    document.querySelector('.header p').textContent = 'âœ… Stream-i po luhet';
                                });
                            } else {
                                document.querySelector('.header p').innerHTML = 
                                    'âŒ Shfletuesi nuk mbÃ«shtet HLS.<br>' +
                                    'Ju lutem pÃ«rdorni Chrome, Firefox ose Safari.';
                            }
                        }
                        
                        // Start playing
                        playHLS();
                        
                        // Alternative: VLC protocol
                        document.querySelector('.info').innerHTML += 
                            '<p><strong>ğŸ¬ AlternativÃ«:</strong> ' +
                            '<a href="vlc://' + streamUrl + '">Hap nÃ« VLC Player</a></p>';
                    <\/script>
                </body>
                </html>
            `);
            
            newWindow.document.close();
        }

        // 3. TEST STREAM
        function testStream(streamId) {
            const testUrl = `http://server.stream-one.fun:80/play/live.php?mac=00:1B:79:3F:21:AC&stream=${streamId}&extension=m3u8`;
            
            console.log('ğŸ§ª Testimi i stream-it:', testUrl);
            
            // Krijo njÃ« iframe pÃ«r testim
            const testWindow = window.open('', 'Test Stream', 'width=800,height=500');
            testWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head><title>Test Stream</title></head>
                <body style="background: #000; color: white; padding: 20px;">
                    <h2>ğŸ§ª Testimi i Stream-it</h2>
                    <p><strong>URL:</strong> ${testUrl}</p>
                    <p><strong>Status:</strong> <span id="status">Duke testuar...</span></p>
                    <button onclick="testDirect()">Testo DrejtpÃ«rdrejt</button>
                    <script>
                        function testDirect() {
                            fetch('${testUrl}', { mode: 'no-cors' })
                                .then(() => document.getElementById('status').innerHTML = 'âœ… Serveri pÃ«rgjigjet')
                                .catch(() => document.getElementById('status').innerHTML = 'âŒ Serveri nuk pÃ«rgjigjet');
                        }
                        testDirect();
                    <\/script>
                </body>
                </html>
            `);
        }

        // 4. FUNKSIONE NDIHMÃ‹SE
        function getCategoryName(category) {
            const names = {
                'documentarios': 'ğŸ“º DokumentarÃ«',
                'esportes': 'âš½ Sport',
                'filmesseries': 'ğŸ¬ Filma & Seri',
                'infantil': 'ğŸ§¸ FÃ«mijÃ«',
                'jornalismo': 'ğŸ“° Lajme',
                'musicas': 'ğŸµ MuzikÃ«'
            };
            return names[category] || category;
        }

        function setupEventListeners() {
            // Filtro sipas kategorive
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Aktivizo butonin
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const category = this.dataset.category;
                    const cards = document.querySelectorAll('.channel-card');
                    
                    if (category === 'all') {
                        cards.forEach(card => card.style.display = 'block');
                    } else {
                        cards.forEach(card => {
                            card.style.display = card.dataset.category === category ? 'block' : 'none';
                        });
                    }
                });
            });
        }

        // 5. STARTIMI
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ PlayTV po starton...');
            loadChannels();
            
            // Testo nÃ«se Ã«shtÃ« HTTPS
            if (window.location.protocol === 'https:') {
                document.querySelector('.instructions').innerHTML += `
                    <div style="background: #ff4444; color: white; padding: 15px; border-radius: 10px; margin-top: 15px;">
                        <strong>âš ï¸ KY VERSION NUK FUNKSIONON KÃ‹TU!</strong>
                        <p>Stream-et punojnÃ« vetÃ«m nÃ« HTTP. Shkarkoni kÃ«tÃ« faqe dhe hapeni nÃ« kompjuter.</p>
                        <button onclick="downloadPage()" style="background: white; color: #ff4444; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 10px;">
                            â¬‡ï¸ SHKARKO PÃ‹R PÃ‹RDORIM LOKAL
                        </button>
                    </div>
                `;
            }
        });

        // 6. SHKARKO PÃ‹R PÃ‹RDORIM LOKAL
        function downloadPage() {
            // Krijo njÃ« blob me tÃ« gjithÃ« kodin
            const fullHTML = document.documentElement.outerHTML;
            const blob = new Blob([fullHTML], { type: 'text/html' });
            
            // Krijo link pÃ«r shkarkim
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'PlayTV.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('âœ… Faqja u shkarkua! Hapni PlayTV.html nÃ« kompjuter.');
        }
    </script>
</body>
</html>
